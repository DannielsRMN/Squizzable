<h1>Temas</h1>

<p-button label="Nuevo Tema" icon="pi pi-plus" class="mr-2" (onClick)="abrirDialogo()" />

<p-table [value]="temas" [tableStyle]="{'min-width': '50rem'}">
  <ng-template #header>
    <tr>
      <th style="width:20%">ID</th>
      <th style="width:20%">Nombre Tema</th>
      <th style="width:20%">Contenido</th>
      <th style="width:20%">Puntos Total</th>
      <th style="width:20%">Módulo</th>
      <th style="width:20%"></th>
    </tr>
  </ng-template>
  <ng-template #body let-tema let-ri="rowIndex">
    <tr>
      <td>{{ tema.idTema }}</td>
      <td>{{ tema.nombreTema }}</td>
      <td>{{ tema.contenido }}</td>
      <td>{{ tema.puntosTotal }}</td>
      <td>{{ tema.nombreModulo }}</td>
      <td>
        <div class="flex items-center justify-center gap-2">
          <button pButton pRipple icon="pi pi-pencil" (click)="editarTema(tema)" text rounded severity="secondary"></button>
          <button pButton pRipple icon="pi pi-times" (click)="eliminarTema(tema)" text rounded severity="secondary"></button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<!-- Diálogo para crear/editar tema -->
<p-dialog header="Creación/Edición de Tema" [modal]="true" [(visible)]="visible" [style]="{ width: '30rem' }">
  <div class="flex flex-column gap-3">
    <div class="field">
      <label for="nombreTema" class="font-semibold">Nombre del Tema</label>
      <input pInputText id="nombreTema" [(ngModel)]="temaDialogo.nombreTema" class="w-full" />
    </div>

    <div class="field">
      <label for="contenido" class="font-semibold">Contenido</label>
      <textarea pInputTextarea id="contenido" [(ngModel)]="temaDialogo.contenido" rows="3" class="w-full"></textarea>
    </div>

    <div class="field">
      <label for="puntos" class="font-semibold">Puntos Totales</label>
      <input type="number" pInputText id="puntos" [(ngModel)]="temaDialogo.puntosTotal" class="w-full" />
    </div>

    <div class="field">
      <label for="modulo" class="font-semibold">Módulo</label>
      <p-dropdown
        id="modulo"
        [options]="modulos"
        [(ngModel)]="modu_select"
        optionLabel="nombreModulo"
        placeholder="Seleccione un módulo"
        class="w-full"
      ></p-dropdown>
    </div>
  </div>

  <div class="flex justify-end gap-2 mt-4">
    <p-button label="Cancelar" severity="secondary" (click)="visible = false" />
    <p-button label="Guardar" (click)="guardarTema()" />
  </div>
</p-dialog>
