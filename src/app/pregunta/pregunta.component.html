<div class="container">

  <h1>Listado de Preguntas</h1>
  <hr>
  <p-button label="Nueva Pregunta" icon="pi pi-plus" class="mr-2" (onClick)="abrirPegunta()" />
  <p-table [value]="preguntas" [tableStyle]="{'min-width': '50rem'}">
    <ng-template #header>
      <tr>
        <th style="width:1%">ID</th>
        <th style="width:auto">PREGUNTA</th>
        <th style="width:10%">TEMA</th>
        <th style="width:15%">ACCIONES</th>

      </tr>
    </ng-template>
    <ng-template #body let-pregunta let-ri="rowIndex">
      <tr>
        <td>
          {{pregunta.idPregunta}}
        </td>
        <td>
          {{pregunta.pregunta}}
        </td>
        <td>
          {{pregunta.tema}}
        </td>

        <td>
          <div class="flex items-center justify-center gap-2">
            <button pButton pRipple type="button" icon="pi pi-pencil" (click)="editarPregunta(pregunta)" text rounded
              severity="secondary"></button>
            <button pButton pRipple type="button" icon="pi pi-times" (click)="eliminarPregunta(pregunta)" text rounded
              severity="secondary"></button>

          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>

<!-- CREATE y UPDATE -> Formulario (VERSIÓN MEJORADA) -->
  
<!-- easteregg: Jueguen Fallout 76, necesito gentita para hacer las raids :) -->
<p-dialog header="Creación/Edición de Pregunta" [modal]="true" [(visible)]="visible" [style]="{ width: '32rem' }">
<div class="grid form-grid">

<!-- Fila para el texto de la Pregunta -->
<div class="field col-12">
<label for="pregunta" class="font-semibold">
Texto de la Pregunta
<i class="pi pi-info-circle ml-2" pTooltip="Escribe la pregunta completa que se le mostrará al usuario."></i>
</label>
<textarea pInputTextarea id="pregunta" class="w-full" autocomplete="off" [(ngModel)]="preguntaDialogo.pregunta" placeholder="Ej: ¿Quien fue el Coronel Leoncio Prado Gutierrez?" rows="3"></textarea>
</div>

<!-- Fila para el Tema -->
<div class="field col-12">
<label for="tema" class="font-semibold">
Tema
<i class="pi pi-info-circle ml-2" pTooltip="Asocia esta pregunta a un tema específico."></i>
</label>
<p-dropdown
id="tema"
[options]="temas"
[(ngModel)]="temaSelecionado"
optionLabel="nombreTema"
placeholder="Seleccione un tema"
styleClass="w-full"
[appendTo]="'body'"
></p-dropdown>
</div>

</div>

<!-- Pie de página del diálogo -->
<ng-template pTemplate="footer">
<div class="flex justify-content-end gap-2">
<p-button label="Cancelar" severity="secondary" (click)="visible = false" />
<p-button label="Guardar" (click)="guardarPregunta()" />
</div>
</ng-template>
</p-dialog>



</div>
